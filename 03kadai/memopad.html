<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>myMemoPad</title>
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
</head>
<body>
<header>
<h1>MemoPad</h1>
</header>
<main style="display:none;">
    <div id="inputday">発生日
    <input type="date" id="key" > 
    </div>
    <textarea id="text_area" placeholder="やることを入力してください"></textarea>
    <label id="important">
        <input type="checkbox" name="" >重要
        </label>
      <div id="outputday">期限
    <input type="date" name="" id="deadline">
    </div>
  
    <ul>
        <li id="save">保存</li>
        <li id="tableclear">リスト消去</li>
        <li id="allclear">全消去</li>
    </ul>
</main>

<table id="list">
    <caption>ToDoリスト</caption>
    <tr>
        <th>発生日</th>
        <th >やること</th>
        <th >期限</th>
        <th >重要</th>
    </tr>
</table>

<!-- ここに追加データが挿入される -->

<script>
// まず押さえておくべきは、localstrageには「キー」「値」という
// 概念が存在している。

//1.Save クリックイベント
$("main").slideDown(500);
$("#save").on("click",function(){
    const key = $("#key").val();
    const value = $("#text_area").val();
    const date = $("#deadline").val();
    const state = $("#important").text();
    // val()はHTMLタグ内に記述されているvalue属性を取得したり変更することができるメソッド
    // つまり、id=key,id=tex_areaに記述されている内容を取得するという意味
    localStorage.setItem(key,value,date,state);
    // ここでlocalstrageに保存する
    // このlocalstrageはkeyとvalue(キーと値)をセットにして使うもの。
    // setItem（キー,値）のように使う。
    //変数名をkey、valueのように分かりやすくつけることが多い 
    const html = '<tr><th>'+key+'</th><td>'+value+'</td><td>'+date+'</td><td>'+state+'</td></tr>';
    // 定義したtableタグの中のtr（行）、th(見出し)、td（データ）
    // にkey(th)とvalue(td)を書き込む
    $("#list").append(html);
    // 書き込んだものを#list（テーブル）に書き込む
});

//2.clear クリックイベント
$("#tableclear").on("click",function(){
    const key   = localStorage.key;
    localStorage.removeItem(1);
});
// このtableclearはtable欄が消去される

$("#allclear").on("click",function(){
    localStorage.clear();
    $("#list").text("");
    $("#text_area").html("");
});

//3.ページ読み込み：保存データ取得表示
for(let i=0; i<localStorage.length; i++){
    // localStrageにあるキーの数だけ、という意味
    // localstrageにはキーはデフォルトで存在するため、keyと書かずにkeyの長さ（数）だとわかる。
    const key   = localStorage.key(i);
    // localStrageのキーの中身を全て取得するlocal
    const value = localStorage.getItem(key);
    // 取得したものを取り込む
    const html = '<tr><th>'+key+'</th><td>'+value+'</td></tr>';
    // htmlという変数で、上記変数のkeyとvalueをテーブルに移す
    $("#list").append(html);
    // 最後にlistにhtml表示をする
};

if(localStorage.getItem("")){
    const value =localStorage.getItem("");
    $("#text_area").val(value);
};

</script>
<footer><small></small></footer>
</body>
</html>